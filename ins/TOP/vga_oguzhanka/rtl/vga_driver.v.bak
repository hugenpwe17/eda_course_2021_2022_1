module vga_driver(
    input wire clk, 
    output reg VGA_clk,

    output reg [9:0] xCount,
    output reg [9:0] yCount,
    
    output wire VGA_hSync,
    output wire VGA_vSync,
    
    output wire [1:0] Red_1,
    output wire [1:0] Blue_1,
    output wire [1:0] Green_1
);
	
    integer porchHF = 640;  //start of horizntal front porch
	integer syncH   = 616;  //start of horizontal sync
	integer porchHB = 752;  //start of horizontal back porch
	integer maxH    = 800;  //total length of line.

    integer porchVF = 480;  //start of vertical front porch 
	integer syncV   = 490;  //start of vertical sync
	integer porchVB = 492;  //start of vertical back porch
	integer maxV    = 525;  //total rows.

	reg p_hSync;
    reg p_vSync; 	
	reg q;
	reg displayArea;
	
	reg [1:0]green;

	assign Green_1 = green;
	always@(posedge VGA_clk)
	begin
		if(xCount === maxH)
			xCount <= 0;
		else
			xCount <= xCount + 1;
	end
	
	// 93 sync, 46 bp, 640 display, 15 fp
	// 2  sync, 33 bp, 480 display, 10 fp

	always@(posedge clk)
	begin
		q <= ~q; 
		VGA_clk <= q;
	end
	
	always@(posedge VGA_clk)
	begin
		if(xCount === maxH)
		begin
			if(yCount === maxV)
				yCount <= 0;
			else
			yCount <= yCount + 1;
		end
	end
	
	always@(posedge VGA_clk)
	begin
		displayArea <= ((xCount < porchHF) && (yCount < porchVF)); 
	end

	always@(posedge VGA_clk)
	begin
		VGA_vSync <= !((xCount >= syncH) && (xCount < porchHB)); 
		VGA_hSync <= !((yCount >= syncV) && (yCount < porchVB)); 
	end
 
	assign VGA_vSync = ~p_vSync; 
	assign VGA_hSync = ~p_hSync;
	
	always @(posedge VGA_clk)
	begin
	if (displayArea)begin
		if ((xCount % 80 == 0)||(yCount % 80 == 0))
				green <= 2'b11;
		else 
				green <= 0;
		end
	else
		green <= 0;
	end
	
endmodule		


